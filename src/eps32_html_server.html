<!DOCTYPE html>
<html>
<head>
    <title>ESP32 Mecanum</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        button { font-size: 20px; padding: 10px 20px; margin: 10px; }
    </style>
</head>
<body>
    <h2>Mecanum Control</h2>
    <p><strong>Use arrow keys or buttons to move. Release to stop.</strong></p>
    
    <button onclick="sendCommand('diagonal-left')">Diagonal Left</button>
    <button onclick="sendCommand('forward')">Forward</button>
    <button onclick="sendCommand('diagonal-right')">Diagonal Right</button><br>
    
    <button onclick="sendCommand('left')">Move Left</button>
    <button onclick="sendCommand('stop')">Stop</button>
    <button onclick="sendCommand('right')">Move Right</button><br>
    
    <button onclick="sendCommand('concern-left')">Concern Left</button>
    <button onclick="sendCommand('backward')">Backward</button>
    <button onclick="sendCommand('concern-right')">Concern Right</button>

    <script>
        let activeKeys = {};

        function sendCommand(command) {
            fetch('/' + command)
                .then(response => console.log('Command sent:', command))
                .catch(error => console.error('Error sending command:', error));
        }

        document.addEventListener("keydown", function(event) {
            if (!activeKeys[event.key]) {  
                activeKeys[event.key] = true;  
                switch(event.key) {
                    case "w":
                        sendCommand("forward");
                        break;
                    case "s":
                        sendCommand("backward");
                        break;
                    case "ArrowLeft":
                        sendCommand("left");
                        break;
                    case "ArrowRight":
                        sendCommand("right");
                        break;
                    case "q":
                        sendCommand("diagonal-left");
                        break;
                    case "e":
                        sendCommand("diagonal-right");
                        break;
                    case "a":
                        sendCommand("concern-left");
                        break;
                    case "d":
                        sendCommand("concern-right");
                        break;
                }
            }
        });

        document.addEventListener("keyup", function(event) {
            if (activeKeys[event.key]) {  
                delete activeKeys[event.key];  
                sendCommand("stop");
            }
        });
    </script>
</body>
</html>
